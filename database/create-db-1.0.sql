CREATE TABLE NN_PERSON (ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, ANSPRECHPARTNER VARCHAR(255), NAME VARCHAR(255) NOT NULL, VERSION BIGINT, ORT VARCHAR(255), PLZ INTEGER, STRASSE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE MIETOBJEKT (ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, BEZEICHNUNG VARCHAR(100), NUMMER INTEGER NOT NULL, TYP VARCHAR(255) NOT NULL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE PERSON (ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, EMAIL VARCHAR(255) NOT NULL, GEBURTSJAHR INTEGER, NACHNAME VARCHAR(255) NOT NULL, UPDATEDINLASTSYNC SMALLINT DEFAULT 0, USERID BIGINT UNIQUE, VERSION BIGINT, VORNAME VARCHAR(255) NOT NULL, wohnung_nr VARCHAR(255) NOT NULL, ORT VARCHAR(255), PLZ INTEGER, STRASSE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE VERTRAG (ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, beginn_datum DATE, end_datum DATE, VERSION BIGINT, mieter_firma BIGINT, MIETOBJEKT_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE STELLPLATZ (ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, NUMMER INTEGER, SEKTOR INTEGER, TYP VARCHAR(255) NOT NULL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE RESERVATION_STELLPLATZ (ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, ANONYM SMALLINT DEFAULT 0, beginn_datum DATE NOT NULL, BEMERKUNG VARCHAR(255), BEZAHLT SMALLINT DEFAULT 0 NOT NULL, EMAIL VARCHAR(255), email_rollover VARCHAR(255), email_rollover_success SMALLINT DEFAULT 0 NOT NULL, end_datum_exklusiv DATE NOT NULL, kosten_pro_monat FLOAT NOT NULL, NAME VARCHAR(255), reservation_datum DATE NOT NULL, reservation_status INTEGER NOT NULL, VERSION BIGINT, WOHNUNGNR INTEGER, mieter_firma BIGINT, mieter_person BIGINT, STELLPLATZ_ID BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE vertrag_mieter (vertrag_id BIGINT NOT NULL, person_id BIGINT NOT NULL, PRIMARY KEY (vertrag_id, person_id))
CREATE TABLE vertrag_bewohner (vertrag_id BIGINT NOT NULL, person_id BIGINT NOT NULL, PRIMARY KEY (vertrag_id, person_id))
ALTER TABLE VERTRAG ADD CONSTRAINT VRTRAGMIETOBJEKTID FOREIGN KEY (MIETOBJEKT_ID) REFERENCES MIETOBJEKT (ID)
ALTER TABLE VERTRAG ADD CONSTRAINT VERTRAGmieterfirma FOREIGN KEY (mieter_firma) REFERENCES NN_PERSON (ID)
ALTER TABLE RESERVATION_STELLPLATZ ADD CONSTRAINT RSRVTNSTLSTLLPLTZD FOREIGN KEY (STELLPLATZ_ID) REFERENCES STELLPLATZ (ID)
ALTER TABLE RESERVATION_STELLPLATZ ADD CONSTRAINT RSRVTNSTLLPLmtrfrm FOREIGN KEY (mieter_firma) REFERENCES NN_PERSON (ID)
ALTER TABLE RESERVATION_STELLPLATZ ADD CONSTRAINT RSRVTNSTLLPmtrprsn FOREIGN KEY (mieter_person) REFERENCES PERSON (ID)
ALTER TABLE vertrag_mieter ADD CONSTRAINT vrtragmieterprsnid FOREIGN KEY (person_id) REFERENCES PERSON (ID)
ALTER TABLE vertrag_mieter ADD CONSTRAINT vrtrgmietervrtrgid FOREIGN KEY (vertrag_id) REFERENCES VERTRAG (ID)
ALTER TABLE vertrag_bewohner ADD CONSTRAINT vrtrgbewohnerprsnd FOREIGN KEY (person_id) REFERENCES PERSON (ID)
ALTER TABLE vertrag_bewohner ADD CONSTRAINT vrtrgbwohnervrtrgd FOREIGN KEY (vertrag_id) REFERENCES VERTRAG (ID)
